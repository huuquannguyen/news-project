<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <title>NEWSROOM - Free Bootstrap Magazine Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="/img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">   

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="/css/style.css" rel="stylesheet">
    <style>
        #actions {
            display: none;
        }

        .admin-action {
            cursor: pointer;
            width: 20px;
        }

        #news:hover #actions{
            display: block;
        }

        .global-container{
            display: none;
            align-items: center;
            justify-content: center;
            background-color: rgba(0,0,0,0.5);
            height: 100vh;
            width: 100vw;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
        }
        .pop{
            display: flex;
        }
        .unpop{
            display: none;
            animation-name: close;
            animation-duration: 0.3s;
        }
        @keyframes grow{
            0%{
                transform: scale(0.5,0.5)
            }
            100%{
                transform: scale(1,1)
            }
        }

        .window{
            text-align: center;
            animation-name: grow;
            animation-duration: 0.3s;
        }
        .head-msg{
            background-color: #dfdfdf;
            width: 100%;
            padding: 1rem;
            font-weight: bolder;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            margin-bottom: 0;
        }
        .main-msg{
            background-color: #fff;
            width: 100%;
            padding: 2rem 1rem;
            font-weight: bold;
            margin-bottom: 0;
        }
        .confirm{
            background-color: #dfdfdf;
            width: 100%;
            padding: 1rem;
            text-align: right;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
            font-weight: bold;
        }
        .delete{
            background-color: #dc3545;
            color: #fff;
            border: none;
            border-radius: 3px;
            padding: 5px 10px;
        }
        .delete:hover {
            background-color: #bb0e1f;
        }
        .cancel{
            background-color: #777;
            color: #fff;
            border: none;
            border-radius: 3px;
            padding: 5px 10px;
        }
        .cancel:hover {
            background-color: #3a3636;
        }

        #actions:hover {
            opacity: 0.8 !important;
        }

    </style>
</head>

<body>
    <!-- Topbar Start -->
    <div th:replace="header::topbar"></div>
    <!-- Topbar End -->


    <!-- Navbar Start -->
    <div th:replace="header::navbar"></div>
    <!-- Navbar End -->


    <!-- Breadcrumb Start -->
    <div class="container-fluid">
        <div class="container">
            <nav class="breadcrumb bg-transparent m-0 p-0">
                <a class="breadcrumb-item" href="#">Home</a>
                <a class="breadcrumb-item" href="#">Category</a>
                <a class="breadcrumb-item" href="#" th:text="${news.category}">Technology</a>
                <span class="breadcrumb-item active" th:text="${news.title}">News Title</span>
            </nav>
        </div>
    </div>
    <!-- Breadcrumb End -->


    <!-- News With Sidebar Start -->
    <div class="container-fluid py-3">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <!-- News Detail Start -->
                    <div id="news" class="position-relative mb-3">
                        <form th:id="'delete-form-' + ${news.id}" hidden th:action="@{/admin/news/delete/} + ${news.id}" method="post">
                        </form>
                        <div id="actions" style="position: absolute; right: 0; top: 0; background-color: white; opacity: 0.5; padding: 10px">
                            <img th:if="${authenticated}"
                                 src="/img/edit-icon.png" th:class="'edit-action admin-action edit-action-' + ${news.id}">
                            <img th:if="${authenticated}"
                                 src="/img/bin-icon.png" th:class="'delete-action admin-action delete-action-' + ${news.id}"
                                 style="margin-left: 15px">
                        </div>
                        <img class="img-fluid w-100" th:src="@{${news.imgUrl}}" style="object-fit: cover;">
                        <div class="overlay position-relative bg-light">
                            <div class="mb-3">
                                <a href="" th:text="${news.category}"> News category </a>
                                <span class="px-1">/</span>
                                <span th:text="${news.updatedDateManual != null ? news.updatedDateManual : news.updatedDate}">January 01, 2045</span>
                            </div>
                            <div>
                                <h3 class="mb-3" th:text="${news.title}"> News title </h3>
                                <p th:text="${news.content}"> News content </p>
                                <th:block th:each="para, stat : ${news.paragraphs}">
                                    <h4 class="mb-3" th:text="${para.title}"> Paragraph title </h4>
                                    <div class="mb-3" style="overflow: hidden">
                                        <img class="img-fluid w-50 mb-2" th:src="@{${para.imgUrl}}"
                                             th:classappend="${stat.index % 2 == 0} ? 'mr-4 float-left': 'ml-4 float-right'">
                                        <p th:text="${para.content}"> Paragraph content </p>
                                    </div>
                                    <video class="mb-4" style="width: 100%" controls th:if="${para.videoUrl != null}">
                                        <source th:src="@{${para.videoUrl}}" type="video/mp4">
                                    </video>
                                </th:block>
                            </div>
                        </div>
                    </div>
                    <!-- News Detail End -->

                    <!-- Comment List Start -->
                    <div class="bg-light mb-3" style="padding: 30px;">
                        <h3 class="mb-4">3 Comments</h3>
                        <div class="media mb-4">
                            <img src="/img/user.jpg" alt="Image" class="img-fluid mr-3 mt-1" style="width: 45px;">
                            <div class="media-body">
                                <h6><a href="">John Doe</a> <small><i>01 Jan 2045</i></small></h6>
                                <p>Diam amet duo labore stet elitr invidunt ea clita ipsum voluptua, tempor labore
                                    accusam ipsum et no at. Kasd diam tempor rebum magna dolores sed sed eirmod ipsum.
                                    Gubergren clita aliquyam consetetur sadipscing, at tempor amet ipsum diam tempor
                                    consetetur at sit.</p>
                                <button class="btn btn-sm btn-outline-secondary">Reply</button>
                            </div>
                        </div>
                        <div class="media">
                            <img src="/img/user.jpg" alt="Image" class="img-fluid mr-3 mt-1" style="width: 45px;">
                            <div class="media-body">
                                <h6><a href="">John Doe</a> <small><i>01 Jan 2045 at 12:00pm</i></small></h6>
                                <p>Diam amet duo labore stet elitr invidunt ea clita ipsum voluptua, tempor labore
                                    accusam ipsum et no at. Kasd diam tempor rebum magna dolores sed sed eirmod ipsum.
                                    Gubergren clita aliquyam consetetur sadipscing, at tempor amet ipsum diam tempor
                                    consetetur at sit.</p>
                                <button class="btn btn-sm btn-outline-secondary">Reply</button>
                                <div class="media mt-4">
                                    <img src="/img/user.jpg" alt="Image" class="img-fluid mr-3 mt-1"
                                        style="width: 45px;">
                                    <div class="media-body">
                                        <h6><a href="">John Doe</a> <small><i>01 Jan 2045 at 12:00pm</i></small></h6>
                                        <p>Diam amet duo labore stet elitr invidunt ea clita ipsum voluptua, tempor
                                            labore accusam ipsum et no at. Kasd diam tempor rebum magna dolores sed sed
                                            eirmod ipsum. Gubergren clita aliquyam consetetur sadipscing, at tempor amet
                                            ipsum diam tempor consetetur at sit.</p>
                                        <button class="btn btn-sm btn-outline-secondary">Reply</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Comment List End -->

                    <!-- Comment Form Start -->
                    <div class="bg-light mb-3" style="padding: 30px;">
                        <h3 class="mb-4">Leave a comment</h3>
                        <form>
                            <div class="form-group">
                                <label for="name">Name *</label>
                                <input type="text" class="form-control" id="name">
                            </div>
                            <div class="form-group">
                                <label for="email">Email *</label>
                                <input type="email" class="form-control" id="email">
                            </div>
                            <div class="form-group">
                                <label for="website">Website</label>
                                <input type="url" class="form-control" id="website">
                            </div>

                            <div class="form-group">
                                <label for="message">Message *</label>
                                <textarea id="message" cols="30" rows="5" class="form-control"></textarea>
                            </div>
                            <div class="form-group mb-0">
                                <input type="submit" value="Leave a comment"
                                    class="btn btn-primary font-weight-semi-bold py-2 px-3">
                            </div>
                        </form>
                    </div>
                    <!-- Comment Form End -->
                </div>

                <div th:replace="sidebar::sidebar"></div>
                <div class="global-container" id="global">
                    <div class="window">
                        <p class="head-msg">Bạn có chắc chắn muốn xóa không?</p>
                        <p class="main-msg">Hành động này không thể hoàn tác!</p>
                        <div class="confirm">
                            <button class="cancel">Hủy</button>
                            <button class="delete">Xóa</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    </div>
    <!-- News With Sidebar End -->


    <!-- Footer Start -->
    <div th:replace="footer::footer"></div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-dark back-to-top"><i class="fa fa-angle-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="/lib/easing/easing.min.js"></script>
    <script src="/lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="/mail/jqBootstrapValidation.min.js"></script>
    <script src="/mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="/js/main.js"></script>
    <script src="/js/fragment.js"></script>

    <script type="text/javascript">
        //admin action
        $('.delete-action').click(popIt);
        let popWin = document.querySelector(".global-container");
        let cancelButton = document.querySelector(".cancel");

        function popIt(){
            popWin.classList.remove("unpop");
            popWin.classList.add("pop");
        }

        cancelButton.addEventListener("click",unPopIt);
        function unPopIt(){
            popWin.classList.remove("pop");
            popWin.classList.add("unpop");
        }

        popWin.addEventListener("click",outWin);
        function outWin(e){
            if (e.target.id === "global"){
                unPopIt();
            }
        }

        $('.admin-action').click(function () {
            const classAction = $(this).attr('class').split(/\s+/)[2];
            const newsId = classAction.split('-')[2];
            const action = classAction.split('-')[0];
            if (action === 'edit') {
                window.location.href = '/admin/news/update/' + newsId;
            }
            if (action === 'delete') {
                $('.delete').click(function (){
                    $('#delete-form-' + newsId).submit();
                })
            }
        })
    </script>
</body>

</html>